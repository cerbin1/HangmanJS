<!DOCTYPE html>
<html lang="en">
<head>
    <link rel="stylesheet" href="style.css">
    <meta charset="UTF-8">
    <title>Hangman</title>
</head>
<body>
<div class="container">
    <button onclick="setWord()">POKA SLOWO</button>

    <div id="divForDisplayWordToGuess"></div>

    <div id="0" onclick="checkLetter(this)" class="letter">A</div>
    <div id="1" onclick="checkLetter(this)" class="letter">B</div>
    <div id="2" onclick="checkLetter(this)" class="letter">C</div>

    <img src="0.png" alt="error" id="hangmanImage">

</div>
<script>
    var wordsArray = ["zubr", "kot", "pies", "szczur", "hipopotam", "chomik", "zyrafa", "slon", "polacy", "kon"];
    var hangmanImages = ["1.png", "2.png", "3.png", "4.png", "5.png", "6.png", "7.png", "8.png", "9.png", "10.png", "11.png", "12.png"];
    var letterGuess = [];
    var characterArray = ['a', 'b', 'c'];
    var usersWordToGuess = "";
    var wordToGuess;
    var fails = 0;
    var endOfGame = false;

    function checkLetter(div) {
        if (!endOfGame) {
            div.style.display = "none";
            console.log(characterArray[parseInt(div.id)]);
            if (!isLetterInGuessedWord(characterArray[parseInt(div.id)])) {
                fails++;
                document.getElementById("hangmanImage").src = hangmanImages[fails - 1];
                console.log("Wysiadki: " + fails);
                if (checkIfPlayerLose()) {
                    console.log("Przegrana");
                    endOfGame = true;
                }
            }
            displayGuessedLetters();
            if (checkIfWin()) {
                console.log("wygrales");
                endOfGame = true;
            }
        }
        else {
            console.log("koniec gry");
        }
    }

    function setWord() {
        var divForDisplayWordToGuess = document.getElementById("divForDisplayWordToGuess");
        wordToGuess = "abcdefghijk"; //TODO random word from an array/file
        for (var i = 0; i < wordToGuess.length; i++) {
            divForDisplayWordToGuess.innerHTML += "_ ";
            letterGuess[i] = false;
        }
    }

    function isLetterInGuessedWord(character) {
        var booleanVariable = false;
        for (var i = 0; i < wordToGuess.length; i++) {
            if (wordToGuess.charAt(i) === character) {
                letterGuess[i] = true;
                booleanVariable = true;
            }
            else {
                console.log("Nie znaleziono literki w slowie");
            }
        }
        return booleanVariable;
    }

    function checkIfPlayerLose() {
        return fails == 12;
    }

    function displayGuessedLetters() {
        usersWordToGuess = "";
        for (var i = 0; i < wordToGuess.length; i++) {
            if(letterGuess[i]) {
                usersWordToGuess += wordToGuess.charAt(i) + " ";
            }
            else {
                usersWordToGuess += "_ ";
            }
        }
        document.getElementById("divForDisplayWordToGuess").innerHTML = usersWordToGuess;
        console.log(usersWordToGuess);
    }

    function checkIfWin() {
        for (var i = 0; i < wordToGuess.length; i++) {
            if(!letterGuess[i]){
                return false;
            }
        }
        return true;
    }


</script>
</body>
</html>
